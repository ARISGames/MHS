<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name = "viewport" content = "width=device-width, user-scalable=no" />
<title>Trading Post</title>
<script type = "text/javascript" src = "arisjs.js"></script>

<script type = "text/javascript">
document.addEventListener('touchmove', function(e) {e.preventDefault();}, false);

function loadMe()
{
    setScene(sceneIntro);
    setTimeout(function(){initialize()},100);
}

function setScene(scene)
{
    document.getElementById("loading").style.display="none";
    document.getElementById("intro").style.display="none";
    document.getElementById("trade").style.display="none";

    switch(scene)
    {
        case sceneLoading:
            document.getElementById("loading").style.display="block";
            break;
        case sceneIntro:
            document.getElementById("intro").style.display="block";
            break;
        case sceneTrade:
            document.getElementById("trade").style.display="block";
            break;
    }
}


//Constants
var delay = 300;
var sceneLoading = 0;
var sceneIntro = 1;
var sceneTrade = 2;

//Game Data
var gameId; 
var playerId;
var webPageId;
var clerk = 0;
var hunter = 1;
var crafter = 2;
    
var clerkItemIds = new Array("aji","musawa","orbital","yongyong","pinkmoonaw");
var hunterItemIds = new Array("aji","musawa","orbital","yongyong","pinkmoonaw");
var crafterItemIds = new Array("aji","musawa","orbital","yongyong","pinkmoonaw");
var allItemIds = new Array("aji","musawa","orbital","yongyong","pinkmoonaw, aji","musawa","orbital","yongyong","pinkmoonaw");
var roles = new Array(clerkItemIds, hunterItemIds, crafterItemIds);
var pItems = new Array();
var pItemQtys = new Array();    

//Audio Mapping


//Variables
var pLevel;
var pName;
var pRole;

var bumpProgress;

//Constants


function initialize()
{
    //Get PlayerID and GameID from URL
    var params = parseURLParams(document.URL);
    gameId = parseInt(params.gameId);
    playerId = parseInt(params.playerId);
    webPageId = parseInt(params.webPageId);

    //Get Stuff from Server
    switch(webPageId)
    {
        case clerk:
            pName = "Clerk";
            pRole = clerk;
            break;
        case hunter:
            pName = "Hunter";
            pRole = hunter;
            break;
        case crafter:
            pName = "Crafter";
            pRole = crafter;
            break;
    }

    for(var i = 0; i < roles[pRole].length; i++){
        getItemCount(roles[pRole][i]);
    }

    turnProgress = -1;
    //End Server Get

    //Set up the images
//    document.getElementById("kkomamon").style.backgroundImage = "url('images/" + kNames[kType] + ".gif')";


    //Begin Precaching Media
    //prepareMedia(kMediaIdMusic);
    //setMediaVolume(kMediaIdMusic,0.20);
    //prepareMedia(kMediaIdMiss); 
    //prepareMedia(kMediaIdPunch); 
    //prepareMedia(kMediaIdFire); 
    //prepareMedia(kMediaIdKiss); 
    //prepareMedia(kMediaIdWin); 
    //prepareMedia(kMediaIdLose); 

    //Start Music
    //playMedia(kMediaIdMusic);
}

function didUpdateItemQty(itemId,qty)
{
    switch(itemId)
    {
        case allItemIds[0]:
            pItems.push(allItemIds[0]);
            pItemQtys.push(qty);
            break;
        case allItemIds[1]:
            pItems.push(allItemIds[1]);
            pItemQtys.push(qty);
            break;
    }
}

function pause(millis) 
{
    var date = new Date();
    var curDate = null;
    do { curDate = new Date(); } 
    while(curDate-date < millis)
}

    // update health and xp in ARIS
//    setItemCount(HEALTH_ITEM_ID, pHealth); //setItemCountForPlayer(gameId, playerId, HEALTH_ITEM_ID, pHealth);
//   setItemCount(XP_ITEM_ID, pXP); //setItemCountForPlayer(gameId, playerId, XP_ITEM_ID, pXP);


</script>
<style>
div
{
    border-style:solid;
    border-width:1px;
    border-color:#FF0000;
    padding:0px;
    color:white;
    font-family:Noteworthy;
    font-weight:Bold;
}

body
{
-webkit-user-select:none;
user-select:none;
}

.scene
{
  /* For some reason, adding border fixes the white bar at the top. */
  border-style:solid;
  border-width:2px;
  border-color:#000000;
  width:100%;
  height:100%;
  display:none;
  background-color:#000000;
}

.subtitle
{
        
}
    
.screenSplit
{
        
}
    
.notificaions
{
  
}

.alert
{
  position:absolute;
  height:75px;
  width:150px;
  top:54px;
  left:5px;
}
</style>
</head>
<body onLoad="loadMe()" style="margin:0px; padding:0px;">
<div id="tradeScreen" style="position:relative; margin:0px; width:320px; height:416px;">

<!-- Loading State -->
<div id="loading" class="scene" style="display:block;">
  <div style="color:#FFFFFF; position:absolute; top:198px; left:130px; height:20px; width:60px;">
  loading...
  </div>
</div>

<!-- Trade State -->    
<div id="trade" class="scene"> <!-- style="background-image:url('images/background7.jpg');" -->
 <div id="bumpLogo" class="subtitle">
 
 </div>
    
 <div id="inventory" class="screenSplit">
     
 </div>
    
 <div id="needs" class="screenSplit">
        
 </div>
    
 <div id="helperArea" class="notificaions">
     
 </div>
    
</div>

<!-- Win State -->
<div id="win" class="scene">
  <div style="color:#FFFFFF; position:absolute; top:198px; left:130px; height:20px; width:60px;">
      YOU WIN
  </div>
</div>

<!-- Lose State -->    
<div id="lose" class="scene">
  <div style="color:#FFFFFF; position:absolute; top:198px; left:130px; height:20px; width:60px;">
      YOU LOSE
  </div>
</div>

<!-- Fire Bonus -->
<div id="firebonus" class="bonus">
  <div style="color:#FFFFFF; position:absolute; top:99px; left:65px; width:200px;">
      <b>You have captured enough Aji to unlock their devastating fireball!</b><br /><br />It won't work well on other Aji, but other Kkomamon might be more susceptible to its power...
  </div>
</div>

<!-- Awesome Bonus -->
<div id="awesomebonus" class="bonus">
  <div style="color:#FFFFFF; position:absolute; top:99px; left:65px; width:200px;">
    <b>You are AWESOME!</b><br /><br />Prepare to fight the elusive Orbital, and the leviathan YongYong! You must be quick, and strong!
  <div>
</div>

</div><!-- body -->
</body>
</html>
